{"openapi":"3.1.0","info":{"title":"SoraDirector Backend","version":"0.1.0"},"paths":{"/api/health":{"get":{"tags":["Health Check","健康检查"],"summary":"Health Check","description":"健康检查接口\n返回服务状态信息","operationId":"health_check_api_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/health/database":{"get":{"tags":["Health Check","健康检查"],"summary":"Check Database","description":"检查数据库连接","operationId":"check_database_api_health_database_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/health/services":{"get":{"tags":["Health Check","健康检查"],"summary":"Check Services","description":"检查各个服务状态","operationId":"check_services_api_health_services_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/register":{"post":{"summary":"Register User","description":"用户注册","operationId":"register_user_api_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/__main____RegisterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/login":{"post":{"summary":"Login User","description":"用户登录","operationId":"login_user_api_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/user/{user_id}":{"get":{"summary":"Get User Info","description":"获取用户信息","operationId":"get_user_info_api_user__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/user/{user_id}/stats":{"get":{"summary":"Get User Stats","description":"获取用户统计数据：视频数、商品数、总消费积分","operationId":"get_user_stats_api_user__user_id__stats_get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/credits/{user_id}":{"get":{"tags":["User Management","User Management"],"summary":"Get User Credits","description":"获取用户积分余额","operationId":"get_user_credits_api_credits__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/credits/history/{user_id}":{"get":{"summary":"Get Credit History","description":"获取积分历史","operationId":"get_credit_history_api_credits_history__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/stats":{"get":{"summary":"Get Admin Stats","description":"管理员：获取统计数据","operationId":"get_admin_stats_api_admin_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/admin/users":{"get":{"summary":"Get Admin Users","description":"管理员：获取所有用户列表（包括付费数据）","operationId":"get_admin_users_api_admin_users_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/admin/user/{user_id}/credits":{"put":{"summary":"Update User Credits","description":"管理员：调整用户积分","operationId":"update_user_credits_api_admin_user__user_id__credits_put","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/__main____UpdateCreditsRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/prompts":{"get":{"summary":"Get Admin Prompts","description":"管理员：获取所有提示词（分页）","operationId":"get_admin_prompts_api_admin_prompts_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/videos":{"get":{"summary":"Get Admin Videos","description":"管理员：获取所有视频列表","operationId":"get_admin_videos_api_admin_videos_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/admin/video/{video_id}/public":{"put":{"summary":"Toggle Video Public","description":"管理员：切换视频公开状态","operationId":"toggle_video_public_api_admin_video__video_id__public_put","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","title":"Request"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/video/{video_id}":{"delete":{"summary":"Delete Video Admin","description":"管理员：删除视频","operationId":"delete_video_admin_api_admin_video__video_id__delete","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/videos":{"post":{"summary":"Save Video","description":"保存视频","operationId":"save_video_api_videos_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/__main____SaveVideoRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/videos/{user_id}":{"get":{"summary":"Get User Videos","description":"获取用户的所有视频","operationId":"get_user_videos_api_videos__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/videos/{video_id}":{"put":{"summary":"Update Video","description":"更新视频状态和URL（用于异步视频完成后的状态同步）","operationId":"update_video_api_videos__video_id__put","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/__main____SaveVideoRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete User Video","description":"删除用户视频","operationId":"delete_user_video_api_videos__video_id__delete","parameters":[{"name":"video_id","in":"path","required":true,"schema":{"type":"string","title":"Video Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/public-videos":{"get":{"summary":"Get Public Videos","description":"获取所有公开的视频（内容广场）","operationId":"get_public_videos_api_public_videos_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/products":{"post":{"summary":"Create Product","description":"创建商品","operationId":"create_product_api_products_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/__main____CreateProductRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/products/{user_id}":{"get":{"summary":"Get User Products","description":"获取用户的所有商品","operationId":"get_user_products_api_products__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/product/{product_id}":{"get":{"summary":"Get Product Detail","description":"获取单个商品详情","operationId":"get_product_detail_api_product__product_id__get","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"string","title":"Product Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"summary":"Update Product","description":"更新商品信息","operationId":"update_product_api_product__product_id__put","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"string","title":"Product Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/__main____UpdateProductRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete Product","description":"删除商品","operationId":"delete_product_api_product__product_id__delete","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"string","title":"Product Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/prompts":{"post":{"summary":"Save Prompt","description":"保存提示词","operationId":"save_prompt_api_prompts_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/__main____SavePromptRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/prompts/{user_id}":{"get":{"summary":"Get User Prompts","description":"获取用户的所有提示词","operationId":"get_user_prompts_api_prompts__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/prompts/{prompt_id}":{"delete":{"summary":"Delete Prompt","description":"删除提示词","operationId":"delete_prompt_api_prompts__prompt_id__delete","parameters":[{"name":"prompt_id","in":"path","required":true,"schema":{"type":"string","title":"Prompt Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/characters/{user_id}":{"get":{"summary":"Get User Characters","description":"获取用户的所有角色","operationId":"get_user_characters_api_characters__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/projects":{"post":{"summary":"Create Project","description":"创建项目","operationId":"create_project_api_projects_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/__main____CreateProjectRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/projects/{user_id}":{"get":{"summary":"Get User Projects","description":"获取用户的所有项目","operationId":"get_user_projects_api_projects__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/upload-image":{"post":{"summary":"Upload Image","operationId":"upload_image_api_upload_image_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_image_api_upload_image_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/upload-image":{"post":{"summary":"Upload Image","operationId":"upload_image_upload_image_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_image_upload_image_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/combine-images":{"post":{"summary":"Combine Images","description":"将多张图片拼接成宫格图（2-4张→2x2，5-9张→3x3）\n解决前端Canvas跨域问题，在后端完成图片拼接","operationId":"combine_images_api_combine_images_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CombineImagesRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/generate-nine-grid":{"post":{"summary":"Generate Nine Grid","description":"使用Gemini gemini-3-pro-image-preview生成九宫格图片\n输入：一张白底图\n输出：一张包含9个视角的2K高清九宫格图片\n消耗：50积分","operationId":"generate_nine_grid_api_generate_nine_grid_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateNineGridRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/generated-images/{user_id}":{"get":{"summary":"Get Generated Images","description":"获取用户生成的九宫格图片列表","operationId":"get_generated_images_api_generated_images__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/generated-images/{image_id}":{"delete":{"summary":"Delete Generated Image","description":"删除生成的九宫格图片记录（可选功能）","operationId":"delete_generated_image_api_generated_images__image_id__delete","parameters":[{"name":"image_id","in":"path","required":true,"schema":{"type":"string","title":"Image Id"}},{"name":"user_id","in":"query","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chat":{"post":{"summary":"Send Chat","operationId":"send_chat_api_chat_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/generate-script":{"post":{"summary":"Generate Script","description":"基于产品信息+图片，一次性生成完整视频脚本\n新架构：表单驱动 + AI一键生成","operationId":"generate_script_api_generate_script_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateScriptRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/generate-script-from-product":{"post":{"summary":"Generate Script From Product","description":"新业务流程：根据5张商品图片+使用方法+卖点生成视频脚本\n适配新的4阶段工作流程","operationId":"generate_script_from_product_generate_script_from_product_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateScriptFromProductRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/generate-video":{"post":{"summary":"Generate Video","description":"调用 AI 视频生成服务（Sora）\n支持角色：如果传入character_id，则使用带Character的视频生成API","operationId":"generate_video_api_generate_video_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateVideoRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/generate-video":{"post":{"summary":"Generate Video","description":"调用 AI 视频生成服务（Sora）\n支持角色：如果传入character_id，则使用带Character的视频生成API","operationId":"generate_video_generate_video_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateVideoRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/query-video-task":{"post":{"summary":"Query Video Task","description":"查询视频生成任务状态（POST版本，保留兼容）\n云雾API文档：https://yunwu.apifox.cn/api-358068905.md","operationId":"query_video_task_api_query_video_task_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VideoTaskRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/video-task/{task_id}":{"get":{"summary":"Query Video Task Get","description":"查询视频生成任务状态（GET版本，前端使用）\n云雾API文档：https://yunwu.apifox.cn/api-358068905.md\n路径参数：task_id - 任务ID","operationId":"query_video_task_get_video_task__task_id__get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/video-task/{task_id}":{"get":{"summary":"Query Video Task Get","description":"查询视频生成任务状态（GET版本，前端使用）\n云雾API文档：https://yunwu.apifox.cn/api-358068905.md\n路径参数：task_id - 任务ID","operationId":"query_video_task_get_api_video_task__task_id__get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/generate-character":{"post":{"summary":"Generate Character","description":"使用AI生成角色信息\n使用配置的LLM模型（ChatGPT/Gemini等）","operationId":"generate_character_api_generate_character_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateCharacterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/generate-script-ai":{"post":{"summary":"Generate Script Ai","description":"使用ChatGPT生成视频脚本（新4阶段工作流程）\n根据商品信息、角色、视频配置生成完整的视频脚本","operationId":"generate_script_ai_api_generate_script_ai_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateScriptAIRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/create-character":{"post":{"summary":"Create Character","description":"创建角色（保存到数据库）","operationId":"create_character_api_create_character_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCharacterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/credits/consume":{"post":{"summary":"Consume Credits","description":"消费积分\n用于生成视频、生成脚本等功能的积分扣除","operationId":"consume_credits_api_credits_consume_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsumeCreditsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/credits/recharge":{"post":{"summary":"Recharge Credits","description":"充值积分\n用户通过微信、支付宝等方式购买积分","operationId":"recharge_credits_api_credits_recharge_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RechargeCreditsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/credits/balance/{user_id}":{"get":{"summary":"Get Credits Balance","description":"获取用户积分余额","operationId":"get_credits_balance_api_credits_balance__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/delete-image":{"post":{"summary":"Delete Image","description":"从 TOS 删除图片","operationId":"delete_image_api_delete_image_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteImageRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wechat/create-order":{"post":{"summary":"Create Wechat Order","description":"创建微信支付订单（Native扫码支付）","operationId":"create_wechat_order_api_wechat_create_order_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/wechat/callback":{"post":{"summary":"Wechat Pay Callback","description":"微信支付回调通知（V3版本）","operationId":"wechat_pay_callback_api_wechat_callback_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/wechat/query-order/{order_no}":{"get":{"summary":"Query Wechat Order","description":"查询订单支付状态","operationId":"query_wechat_order_api_wechat_query_order__order_no__get","parameters":[{"name":"order_no","in":"path","required":true,"schema":{"type":"string","title":"Order No"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"Body_upload_image_api_upload_image_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_image_api_upload_image_post"},"Body_upload_image_upload_image_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_image_upload_image_post"},"ChatRequest":{"properties":{"content":{"type":"string","title":"Content"},"context":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Context"},"image_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image Url"},"history":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"History"}},"type":"object","required":["content"],"title":"ChatRequest"},"ChatResponse":{"properties":{"message":{"$ref":"#/components/schemas/Message"},"projectUpdate":{"anyOf":[{"$ref":"#/components/schemas/ProjectUpdate"},{"type":"null"}]}},"type":"object","required":["message"],"title":"ChatResponse"},"Chip":{"properties":{"label":{"type":"string","title":"Label"},"value":{"type":"string","title":"Value"}},"type":"object","required":["label","value"],"title":"Chip"},"CombineImagesRequest":{"properties":{"imageUrls":{"items":{"type":"string"},"type":"array","title":"Imageurls"}},"type":"object","required":["imageUrls"],"title":"CombineImagesRequest","description":"图片拼接请求"},"ConsumeCreditsRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"amount":{"type":"integer","title":"Amount"},"action":{"type":"string","title":"Action"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"type":"object","required":["user_id","amount","action"],"title":"ConsumeCreditsRequest","description":"消费积分请求"},"CreateCharacterRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"age":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Age"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"},"style":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Style"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"}},"type":"object","required":["user_id","name","description"],"title":"CreateCharacterRequest","description":"创建角色请求"},"CreateOrderRequest":{"properties":{"package_id":{"type":"string","title":"Package Id"},"user_id":{"type":"string","title":"User Id"}},"type":"object","required":["package_id","user_id"],"title":"CreateOrderRequest","description":"创建订单请求"},"DeleteImageRequest":{"properties":{"url":{"type":"string","title":"Url"}},"type":"object","required":["url"],"title":"DeleteImageRequest"},"GenerateCharacterRequest":{"properties":{"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model","default":"gpt-4"},"prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Prompt"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"},"ethnicity":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ethnicity"},"age":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Age"},"gender":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"}},"type":"object","title":"GenerateCharacterRequest","description":"使用AI生成角色信息请求"},"GenerateNineGridRequest":{"properties":{"imageUrl":{"type":"string","title":"Imageurl"},"user_id":{"type":"string","title":"User Id"}},"type":"object","required":["imageUrl","user_id"],"title":"GenerateNineGridRequest","description":"生成九宫格图片请求"},"GenerateScriptAIRequest":{"properties":{"productName":{"type":"string","title":"Productname"},"category":{"type":"string","title":"Category"},"usage":{"type":"string","title":"Usage"},"sellingPoints":{"type":"string","title":"Sellingpoints"},"country":{"type":"string","title":"Country"},"language":{"type":"string","title":"Language"},"duration":{"type":"string","title":"Duration"},"style":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Style"},"characterName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Charactername"},"characterDescription":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Characterdescription"}},"type":"object","required":["productName","category","usage","sellingPoints","country","language","duration"],"title":"GenerateScriptAIRequest","description":"使用ChatGPT生成脚本请求（新的4阶段工作流）"},"GenerateScriptFromProductRequest":{"properties":{"productName":{"type":"string","title":"Productname"},"productImages":{"items":{"type":"string"},"type":"array","title":"Productimages"},"usageMethod":{"type":"string","title":"Usagemethod"},"sellingPoints":{"items":{"type":"string"},"type":"array","title":"Sellingpoints"},"language":{"type":"string","title":"Language"},"duration":{"type":"integer","title":"Duration"}},"type":"object","required":["productName","productImages","usageMethod","sellingPoints","language","duration"],"title":"GenerateScriptFromProductRequest","description":"新业务流程：根据商品信息生成脚本"},"GenerateScriptRequest":{"properties":{"productInfo":{"$ref":"#/components/schemas/ProductInfo"},"imageUrl":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Imageurl"}},"type":"object","required":["productInfo"],"title":"GenerateScriptRequest","description":"一次性生成脚本请求"},"GenerateVideoRequest":{"properties":{"prompt":{"type":"string","title":"Prompt"},"images":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Images","default":[]},"orientation":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Orientation","default":"portrait"},"size":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Size","default":"large"},"duration":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration","default":10},"watermark":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Watermark","default":false},"private":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Private","default":true},"character_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Character Id"}},"type":"object","required":["prompt"],"title":"GenerateVideoRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginRequest":{"properties":{"email":{"type":"string","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"LoginRequest","description":"用户登录请求"},"Message":{"properties":{"id":{"type":"string","title":"Id"},"role":{"type":"string","title":"Role"},"content":{"type":"string","title":"Content"},"type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type"},"chips":{"anyOf":[{"items":{"$ref":"#/components/schemas/Chip"},"type":"array"},{"type":"null"}],"title":"Chips"}},"type":"object","required":["id","role","content"],"title":"Message"},"ProductInfo":{"properties":{"productName":{"type":"string","title":"Productname"},"size":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Size"},"weight":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Weight"},"sellingPoints":{"type":"string","title":"Sellingpoints"},"targetMarket":{"type":"string","title":"Targetmarket"},"ageGroup":{"type":"string","title":"Agegroup"},"gender":{"type":"string","title":"Gender"},"style":{"type":"string","title":"Style"}},"type":"object","required":["productName","sellingPoints","targetMarket","ageGroup","gender","style"],"title":"ProductInfo","description":"产品信息表单数据"},"ProjectUpdate":{"properties":{"character":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Character"},"script":{"anyOf":[{"items":{},"type":"array"},{"type":"null"}],"title":"Script"},"product_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Name"}},"type":"object","title":"ProjectUpdate"},"RechargeCreditsRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"amount":{"type":"integer","title":"Amount"},"credits":{"type":"integer","title":"Credits"},"payment_method":{"type":"string","title":"Payment Method"},"order_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Order Id"}},"type":"object","required":["user_id","amount","credits","payment_method"],"title":"RechargeCreditsRequest","description":"充值积分请求"},"ToggleVideoPublicRequest":{"properties":{"isPublic":{"type":"boolean","title":"Ispublic"}},"type":"object","required":["isPublic"],"title":"ToggleVideoPublicRequest","description":"切换视频公开状态请求"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VideoTaskRequest":{"properties":{"task_id":{"type":"string","title":"Task Id"}},"type":"object","required":["task_id"],"title":"VideoTaskRequest"},"__main____CreateProductRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"images":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Images"},"specs":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Specs"},"selling_points":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Selling Points"}},"type":"object","required":["user_id","name"],"title":"CreateProductRequest"},"__main____CreateProjectRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"product_name":{"type":"string","title":"Product Name"},"product_description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Description"}},"type":"object","required":["user_id","product_name"],"title":"CreateProjectRequest"},"__main____RegisterRequest":{"properties":{"email":{"type":"string","title":"Email"},"password":{"type":"string","title":"Password"},"username":{"type":"string","title":"Username"}},"type":"object","required":["email","password","username"],"title":"RegisterRequest","description":"用户注册请求"},"__main____SavePromptRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"content":{"type":"string","title":"Content"},"product_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Name"}},"type":"object","required":["user_id","content"],"title":"SavePromptRequest"},"__main____SaveVideoRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"project_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Project Id"},"video_url":{"type":"string","title":"Video Url"},"thumbnail_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thumbnail Url"},"script":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Script"},"product_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Name"},"prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Prompt"},"is_public":{"type":"boolean","title":"Is Public","default":false},"task_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Id"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status","default":"completed"},"progress":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Progress","default":0}},"type":"object","required":["user_id","video_url"],"title":"SaveVideoRequest"},"__main____UpdateCreditsRequest":{"properties":{"credits":{"type":"integer","title":"Credits"}},"type":"object","required":["credits"],"title":"UpdateCreditsRequest"},"__main____UpdateProductRequest":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"images":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Images"},"specs":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Specs"},"selling_points":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Selling Points"}},"type":"object","title":"UpdateProductRequest"},"routers__admin__UpdateCreditsRequest":{"properties":{"credits":{"type":"integer","title":"Credits"}},"type":"object","required":["credits"],"title":"UpdateCreditsRequest","description":"更新用户积分请求"},"routers__product__CreateProductRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"images":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Images","default":[]},"selling_points":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Selling Points","default":[]}},"type":"object","required":["user_id","name"],"title":"CreateProductRequest","description":"创建商品请求"},"routers__product__UpdateProductRequest":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"images":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Images"},"specs":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Specs"},"selling_points":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Selling Points"}},"type":"object","title":"UpdateProductRequest","description":"更新商品请求"},"routers__project__CreateProjectRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"product_name":{"type":"string","title":"Product Name"},"product_description":{"type":"string","title":"Product Description"}},"type":"object","required":["user_id","product_name","product_description"],"title":"CreateProjectRequest","description":"创建项目请求体"},"routers__prompt__SavePromptRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"content":{"type":"string","title":"Content"},"product_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Name"}},"type":"object","required":["user_id","content"],"title":"SavePromptRequest","description":"保存提示词请求"},"routers__user__RegisterRequest":{"properties":{"username":{"type":"string","title":"Username"},"email":{"type":"string","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","email","password"],"title":"RegisterRequest","description":"用户注册请求"},"routers__video__SaveVideoRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"project_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Project Id"},"video_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Video Url"},"thumbnail_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thumbnail Url"},"script":{"anyOf":[{"items":{"type":"object"},"type":"array"},{"type":"null"}],"title":"Script"},"product_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Product Name"},"prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Prompt"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status","default":"processing"},"is_public":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Public","default":false},"task_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task Id"},"progress":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Progress","default":0}},"type":"object","required":["user_id"],"title":"SaveVideoRequest","description":"保存视频请求"}}}}